---
replicaCount: 1

image:
  repository: ghcr.io/geekxflood/membarr
  pullPolicy: Always
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}

securityContext: {}

# Environment variables for Membarr
# The discord token should be provided via secret
env:
  - name: TZ
    value: "Europe/Zurich"

# Discord token - set via secret or directly
# Recommended: use existingSecret
discord:
  # Token can be set directly (not recommended for production)
  token: ""
  # Use an existing secret containing the token
  existingSecret: ""
  # Key in the secret containing the token
  secretKey: "token"

# Membarr does not expose any HTTP service
service:
  enabled: false

ingress:
  enabled: false

resources: {}

# Persistence for Membarr config/database
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 1Gi
  # Use existing PVC
  existingClaim: ""

# Volume configuration
volumes: []

volumeMounts: []

nodeSelector: {}

tolerations: []

affinity: {}

# OpenBao (Vault) integration for secrets
openbao:
  enabled: false
  # Reference to VaultConnection (format: namespace/name)
  vaultConnectionRef: "vault-secrets-operator-system/default"
  vaultAuth:
    create: true
    mount: "kubernetes"
    role: "media"
    tokenExpirationSeconds: 600
  staticSecret:
    enabled: true
    mount: "secret"
    path: "media/membarr/credentials"
    secretName: "membarr-vault-secret"
    refreshAfter: "1h"
    rolloutRestartTargets:
      - kind: Deployment
        name: membarr
