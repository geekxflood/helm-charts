---
# Backuparr - Automated backup for media applications
# Supports: Servarr apps, Jellyfin, Sabnzbd, Overseerr, Audiobookshelf, and more

# CronJob schedule (default: 3 AM daily)
schedule: "0 3 * * *"
timezone: "Europe/Zurich"

# Image configuration
image:
  repository: alpine
  tag: "3.19"
  pullPolicy: IfNotPresent

# ============================================================
# Applications Configuration
# ============================================================
apps:
  # --- Servarr API-based backups ---
  radarr:
    enabled: true
    url: "http://radarr.media.svc.cluster.local:7878"
    apiVersion: "v3"

  sonarr:
    enabled: true
    url: "http://sonarr.media.svc.cluster.local:8989"
    apiVersion: "v3"

  prowlarr:
    enabled: true
    url: "http://prowlarr.media.svc.cluster.local:9696"
    apiVersion: "v1"

  lidarr:
    enabled: false
    url: "http://lidarr.media.svc.cluster.local:8686"
    apiVersion: "v3"

  readarr:
    enabled: false
    url: "http://readarr.media.svc.cluster.local:8787"
    apiVersion: "v3"

  # --- Other API-based backups ---
  sabnzbd:
    enabled: true
    url: "http://sabnzbd.media.svc.cluster.local:8080"

  seerr:  # Overseerr/Jellyseerr
    enabled: true
    url: "http://seerr.media.svc.cluster.local:5055"

  audiobookshelf:
    enabled: true
    url: "http://audiobookshelf.media.svc.cluster.local:80"

  # --- Filesystem-based backups ---
  bazarr:
    enabled: true
    configPvc: "bazarr-config-iscsi-pvc"

  jellyfin:
    enabled: true
    configPvc: "jellyfin-config-pvc"

  tdarr:
    enabled: true
    configPvc: "tdarr-configs"

  kapowarr:
    enabled: true
    configPvc: "kapowarr-config-iscsi-pvc"

  lazylibrarian:
    enabled: true
    configPvc: "lazylibrarian-config-iscsi-pvc"

  wizarr:
    enabled: true
    configPvc: "wizarr-data-pvc"

  tunarr:
    enabled: true
    configPvc: "tunarr-config"

# ============================================================
# API Keys Secret
# ============================================================
# Create a secret with keys matching app names:
# radarr, sonarr, prowlarr, lidarr, readarr, sabnzbd, seerr, audiobookshelf
existingSecret: "backuparr-api-keys"

# ============================================================
# Backup Storage
# ============================================================
storage:
  nfs:
    server: "10.0.0.4"
    path: "/volume1/media/backup"
  storageClassName: "local-path"
  accessMode: ReadWriteMany
  capacity: "100Gi"

# ============================================================
# Retention
# ============================================================
retention:
  enabled: true
  days: 30

# ============================================================
# Resources
# ============================================================
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Job history
successfulJobsHistoryLimit: 3
failedJobsHistoryLimit: 3

# Pod configuration
podAnnotations: {}
nodeSelector: {}
tolerations: []
affinity: {}
