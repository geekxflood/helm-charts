# Program Director Configuration
# Generic Helm chart - configure in ArgoCD Application for cluster-specific values

enabled: true

image:
  repository: ghcr.io/geekxflood/program-director
  pullPolicy: Always
  tag: "latest"

# Agent configuration
agent:
  # Ollama endpoint
  ollamaUrl: "http://ollama:11434"
  ollamaModel: "llama3:8b"

  # ErsatzTV endpoint
  ersatztvUrl: "http://ersatztv:8409"

  # Radarr configuration (for movies)
  radarr:
    url: "http://radarr:7878"
    # Secret containing API key (used when openbao.enabled=false)
    apiKeySecret: ""
    apiKeySecretKey: "api-key"

  # Sonarr configuration (for TV shows/anime)
  sonarr:
    url: "http://sonarr:8989"
    # Secret containing API key (used when openbao.enabled=false)
    apiKeySecret: ""
    apiKeySecretKey: "api-key"

  # Playlist themes with keywords for LLM matching
  themes: []
  # Example:
  # themes:
  #   - name: "sci-fi-night"
  #     description: "Science fiction themed evening"
  #     duration: 180
  #     keywords:
  #       - "Science Fiction"
  #       - "space"

# API Keys secret (created separately - legacy mode, use openbao instead)
apiKeys:
  # Set to true to create the secret from values (not recommended for production)
  createSecret: false
  radarrApiKey: ""
  sonarrApiKey: ""

# OpenBao (Vault) integration for secrets management
openbao:
  # Enable OpenBao integration (VaultStaticSecret for API keys)
  enabled: false

  # Reference to VaultConnection resource (namespace/name format)
  vaultConnectionRef: "vault-secrets-operator-system/default"

  # VaultAuth configuration for Kubernetes authentication
  vaultAuth:
    create: true
    mount: "kubernetes"
    role: "media"
    tokenExpirationSeconds: 600

  # Radarr API key secret from OpenBao
  radarrSecret:
    enabled: true
    mount: "secret"
    path: "media/radarr"
    secretName: ""  # Defaults to <fullname>-radarr-secret
    secretKey: "api-key"
    refreshAfter: "1h"

  # Sonarr API key secret from OpenBao
  sonarrSecret:
    enabled: true
    mount: "secret"
    path: "media/sonarr"
    secretName: ""  # Defaults to <fullname>-sonarr-secret
    secretKey: "api-key"
    refreshAfter: "1h"

# Scheduling
schedule:
  enabled: true
  # Default: Run daily at 6 PM
  cron: "0 18 * * *"

# Resources
resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

# Service account
serviceAccount:
  create: true
  name: ""

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
