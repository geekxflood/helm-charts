---
replicaCount: 1

image:
  repository: ghcr.io/haveagitgat/tdarr
  pullPolicy: IfNotPresent
  tag: ""
imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}

securityContext: {}

# Environment variables for Tdarr server
env:
  - name: PUID
    value: "1000"
  - name: PGID
    value: "100"
  - name: TZ
    value: "Europe/Zurich"
  - name: serverPort
    value: "8266"
  - name: webUIPort
    value: "8265"
  - name: internalNode
    value: "false"

envFrom: []

# Server does not need GPU runtime
runtime:
  enabled: false
  name: ""

# Service exposes both webUI (8265) and server (8266) ports
service:
  type: ClusterIP
  webUIPort: 8265
  serverPort: 8266

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts: []
  tls: []

resources: {}

# Health probes on webUI port
livenessProbe:
  httpGet:
    path: /
    port: 8265
  initialDelaySeconds: 90
  periodSeconds: 60
  timeoutSeconds: 10
  failureThreshold: 5

readinessProbe:
  httpGet:
    path: /
    port: 8265
  initialDelaySeconds: 60
  periodSeconds: 30
  timeoutSeconds: 10
  failureThreshold: 3

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# NFS cache configuration
# Uses shared NFS for transcode cache with dedicated subfolder
nfsCache:
  enabled: false
  server: ""
  path: ""
  subPath: ""  # Dedicated subfolder for this instance (e.g., "server")

# PVC for server data (config + database)
persistence:
  enabled: true
  storageClass: ""
  size: "10Gi"
  accessMode: ReadWriteOnce

# Additional volumes (server-data and cache are handled by template)
# Override in ApplicationSet for media library PVCs
volumes: []

# Additional volumeMounts (server-data and cache are handled by template)
# Override in ApplicationSet for media library mounts
volumeMounts: []

nodeSelector: {}
tolerations: []
affinity: {}
